<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denis motors</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.tailwindcss.com"></script>
   
</head>

<body class="m-0 ">
    <!-- header section -->
    <section class="header ">
            <!-- header top -->
             <div class="top font-semibold" id="head">
                <h3> Denis Motors Imports limited</h3>
             </div>
            <!-- main header -->
             <div class="header2 p-3">
        
               <div class="logo">
        
                <a href="#" class="bars hidden  text-white "><i class=" text-3xl fas fa-bars -mb-2 p-1"></i>menu</a>
                <a href="index.html"><img src="images/denis-logo.png"></a>
                
                <div class="links lg:w-full ">
                    <a href="index.html " class="hover: hover:bg-black"><i class="fas fa-home "></i>Home</a>
                    <a href="index.html#contacts" class="hover: hover:bg-black"><i class="fas fa-envelope"></i>Contacts</a>
                    <a href="index.html#about" class="hover: hover:bg-black"><i class="fas fa-info"></i>About Us</a>
                    <a href="index.html#reviewList" class="hover: hover:bg-black"><i class="fas fa-thumbs-up"></i>Testmonials</a>
                    <a href="index.html#location" class="hover: hover:bg-black"><i class="fas fa-location"></i>Location</a>
                    
                </div>
               </div>
            <!-- header right -->
            
            <div class="header-right ">
        
                  
                </form>
                       <div class=" right-1 text-white text-lg">
                        <a href="#search"><i class="memb fas fa-envelope "></i>&nbsp; Inquiry</a>
                        
                            <div  class="member mt-1 ">
                               
                            
               <button  id="memb" class="memb "> <i class="fas fa-user text-white"></i>Member</button>
        
                                
                        </div>
                        </div>
               </div>
         
             </div>
            </section>


<section class="lg:border-black lg:border-4 lg:pl-16 pt-1 overflow-hidden lg:m-8 flex" >


        <!-- left nav extends to the bottom -->
    <nav class="h-full -mt-8 w-1/3">
        <div class="left-nav ">
         <div class="bar"></div>
         <h2>search by Maker</h2>
         <div class="left-nav-list pl-2 text">
            <ul>
            <li ><a href="cars.html#toyota" class="toyota" >
                <img src="images/toyota1.jpeg">TOYOTA<span>(12)</span></a>
            </li>

            <li><a href="cars.html#nissan" class="nissan" >
                <img src="images/nissan.jpeg">NISSAN<span>(12)</span></a>
            </li>

            <li><a href="cars.html#benz" class="benz">
                <img src="images/benz.jpeg">BENZ<span>(12)</span></a>
            </li>

            <li><a href="cars.html#mazda" class="mazda">
                <img src="images/mazda.jpeg">MAZDA<span>(12)</span></a>
            </li>

           
            <li><a href="cars.html#subaru" class="subaru">
                <img src="images/subaru.jpeg">SUBARU<span>(12)</span></a>
            </li>
            <li><a href="cars.html#suzuki">
                <img src="images/suzuki.jpeg">SUZUKI<span>(12)</span></a>
            </li>
            <li><a href="cars.html#honda">
                <img src="images/honda.jpeg">HONDA<span>(12)</span></a>
            </li>
            <li><a href="cars.html#bmw">
                <img src="images/bmw.png">BMW<span>(12)</span></a>
            </li>
            <li><a href="cars.html#volks">
                <img src="images/volks.jpeg">VOLKS<span>(12)</span></a>
            </li>
            
           
        </ul>
         </div>
         

         <!-- search by fob -->
         <div class="bar"></div>
         <h2>search by FOB price</h2>
         
         <div class="search-fob pl-6">
         <ul>

            <li class="pt-1"><a href="#cars-by-price">Over Ksh10 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh10 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh9 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh9 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh8 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh7 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh6 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh5 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh3 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh2 000 000</a></li>
            <li class="pt-1"><a href="#cars-by-price">Under Ksh1 000 000</a></li>
        </ul>
         </div>

         <div class="bar"></div>
         <h2>search by Shape </h2>
         <div >
        <ul class="list-none">
            <li class="pt-3"><a href="#coupe" class="flex text-blue-600">
                <img src="images/coupe.png " class="w-12 mr-3">COUPE</a>
            </li>
            <li class="pt-3"><a href="#hatchback" class="flex text-blue-600">
                <img src="images/hatchback.png" class="w-12 mr-3">HATCHBACK</a>
            </li>
            <li class="pt-3"><a href="#sedan" class="flex text-blue-600">
                <img src="images/sedan.png" class="w-12 mr-3">SEDAN</a>
            </li>
            <li class="pt-3"><a href="#pickup" class="flex text-blue-600">
                <img src="images/pickup.png" class="w-12 mr-3">PICKUP</a>
            </li>
            <li class="pt-3"><a href="#micro" class="flex text-blue-600">
                <img src="images/micro.png" class="w-12 mr-3">MICRO</a>
            </li>
            <li class="pt-3"><a href="#van" class="flex text-blue-600">
                <img src="images/van.png" class="w-12 mr-3">VAN</a>
            </li>
            <li class="pt-3"><a href="#truck" class="flex text-blue-600">
                <img src="images/truck.png" class="w-12 mr-3">TRUCK</a>
            </li>
            <li class="pt-3"><a href="#wagon" class="flex text-blue-600">
                <img src="images/wagon.png" class="w-12 mr-3">WAGON</a>
            </li>
        </ul>
         </div>

         <div class="bar"></div>
         <h2>search by year</h2>
         <div class="flex-col">
        <a  class="text-blue-600 "> <span>2019~</span></a></br>
        <a  class="text-blue-600 "> <span>2017~2019</span></a></br>
        <a  class="text-blue-600 "> <span>2014~2017</span></a></br>
        <a  class="text-blue-600 "><span>2012~2014</span></a></br>
        <a  class="text-blue-600 "> <span>~2012</span></a>
        </div>

        </div>
        
    </nav>

    <div class="center w-full m-4">
     
        <div id="mainImageContainer" class="bg-slate-300"></div>
        <div id="additionalImageContainer" class="mt-4 bg-slate-300 p-2 gap-2"></div>
              
        <div id="reservationFormContainer"></div>
  
        
        <h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> COUPE</h3>
            <div class="shape flex gap-2  " id="coupe">
        </div>

        <h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> HATCHBACK</h3>
       <div class="shape flex gap-2  " id=" hatchback">
   </div>

   <h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> SEDAN</h3>
  <div class="shape flex gap-2  " id="sedan">
</div>

<h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> PICKUPS</h3>
<div class="shape flex gap-2  " id="pickups">
</div>

<h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> MICRO</h3>
<div class="shape flex gap-2  " id="micro">
</div>

<h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> VAN</h3>
<div class="shape flex gap-2  " id="van">
</div>

<h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> SUV</h3>
<div class="shape flex gap-2  " id="suv">
</div>
    <h3 class=" w-full h-8 text-white bg-blue-900 p-2 "> WAGON</h3>
<div class="shape flex gap-2  " id="wagon">
</div>
</div>
    </div>
    
</div>
</section>
<script>
            
            function createCarListItem(car) {
    const listItem = document.createElement('div');
    const mainImage = JSON.parse(car.image[0]);

    listItem.innerHTML = `
      <img src="images/${mainImage}" class="car-image">
      <h2>${car.maker} ${car.model}</h2>
      <p>Engine: ${car.engine}</p>
      <p>Price: ${car.price}</p>
      <p>Mileage: ${car.mileage}</p>
    `;

    listItem.classList.add('car-list-item'); // Add a class to the list item for styling

    return listItem;
  }

  // Function to fetch and display cars by shape
  function fetchAndDisplayCars() {
    fetch('http://localhost:4001/cars')
      .then(response => response.json())
      .then(cars => {
        const shapes = ['coupe', 'hatchback', 'sedan', 'pickups', 'micro', 'van', 'suv', 'wagon'];

        shapes.forEach(shape => {
          const container = document.getElementById(shape);
          if (!container) {
            console.error(`Container not found for shape: ${shape}`);
            return; // Skip processing this shape
          }

          container.innerHTML = ''; // Clear previous content

          const carsByShape = cars.filter(car => car.shape.toUpperCase() === shape.toUpperCase());

          if (carsByShape.length > 0) {
            carsByShape.forEach(car => {
              const listItem = createCarListItem(car);
              const images =  JSON.parse(car.image);
                const mainImage = images[0];
              listItem.addEventListener('click', () => {
                displayCarImages(mainImage, images.slice(1), car.maker, car.model);
                window.scrollTo({
                  top: mainImageContainer.offsetTop,
                  behavior: 'smooth'
                });
              });
              container.appendChild(listItem);
            });
          } else {
            container.innerHTML = `<p>No ${shape} cars found.</p>`;
          }
        });
      })
      .catch(error => {
        console.error('Error fetching car data:', error);
      });
  }


function createCarListItem(car) {
const listItem = document.createElement('div');
const images =  JSON.parse(car.image);
const mainImage = images;


listItem.innerHTML = `
<img src="images/${mainImage[0]} "width=200 class="car-image">
<h2>${car.maker} ${car.model}</h2>
<p>Engine: ${car.engine}</p>
<p>Price: ${car.price}</p>
<p>Mileage: ${car.mileage}</p>
<p>Year: ${car.year}</p>
`;

return listItem;
}

//reserve info
let currentDisplayedImage = null;
let currentCarModel = null;
let currentCarMaker = null;

function displayCarImages(mainImage, otherImages, maker, model) {
currentCarMaker = maker; 
currentCarModel = model; 

const mainImageContainer = document.getElementById('mainImageContainer');
mainImageContainer.innerHTML = `<img src="images/${mainImage}" class="car-image">`;

const additionalImageContainer = document.getElementById('additionalImageContainer');
additionalImageContainer.innerHTML = '';

// Add the reservation button for the main image immediately
addReserveButtonToMainImage();

otherImages.forEach((image, index) => {
const additionalImage = document.createElement('img');
additionalImage.src = `images/${image}`;
additionalImage.addEventListener('click', () => {
mainImageContainer.innerHTML = `<img src="images/${image}" class="car-image">`;
currentDisplayedImage = image; // Store the currently displayed image URL
addReserveButtonToMainImage();
});
additionalImageContainer.appendChild(additionalImage);
});
}

function addReserveButtonToMainImage() {
const mainImageContainer = document.getElementById('mainImageContainer');
const reserveButton = mainImageContainer.querySelector('button');

if (!reserveButton && currentDisplayedImage) {
// Create the reserve button and add it to the main image container if it doesn't exist
const newReserveButton = document.createElement('button');
newReserveButton.innerText = 'Reserve';
newReserveButton.addEventListener('click', () => {
showReservationForm(currentDisplayedImage, currentCarMaker, currentCarModel);
});
mainImageContainer.appendChild(newReserveButton);
} else if (reserveButton && !currentDisplayedImage) {
// Remove the reserve button if it exists but there is no current displayed image
reserveButton.remove();
}
}


// ... Rest of your code remains the same ...

document.addEventListener('DOMContentLoaded', () => {
// Fetch and display cars immediately on page load
fetchAndDisplayCars();

// Add event listener to the search button
document.getElementById('searchButton').addEventListener('click', searchCars);
//document.getElementById('searchForm').addEventListener('submit', handleFormSubmit);
document.getElementById('additionalImageContainer').addEventListener('click', clearSearchResults);
document.addEventListener('click', (event) => {
// Check if the clicked element is an image
if (event.target.tagName === 'IMG' && event.target.parentElement.id === 'additionalImageContainer') {
// Scroll to the main image container
}
});
});


</script>

<div class="footer bg-slate-900">
    <div class=" text-white flex justify-center">
        <div class=" flex p-4">
            <img src="images/logo3.png" class="w-100% h-32">
            <div class="smallfooter ml-12 hidden">
            <h4 class="text-xl font-bold"> Denis Motors Imports Ltd</h4>
            <h1 class="font-semibold ">Nairobi Headquaters</h1>
            <span>TEL:+254700914360</span></br>
            <span>PHONE:+254700914360</span></br>
            <span>EMAIL:deniscarimports@gmail.com</span>
        </div>
        </div>

<div class=" footerlist flex">
        <div class="p-4 ">
            <ul>
                <li class="font-semibold mb-6"><h3>Search By Maker</h3>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">TOYOTA (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">NISSAN (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">MITSUBISHI(2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">HONDA(2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">MAZDA (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">SUBARU (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">SUZUKI (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">VOLKSWAGEN (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">BENZ (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">LEXUS (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">AUDI (2)</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer m-3">BMW (2)</a>
                </li>
            </ul>
        </div>
        <div class="p-4 ">
            <ul>
                <li class="font-semibold mb-6"><h3>Search By Shape</h3>
                </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">COUPE</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">SEDAN</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">HATCHBACK</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">WAGON</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">SUV</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">VAN</a>
            </li>
            <li class="p-1">
                <a class="hover:underline cursor-pointer m-3">TRUCK</a>
            </li>
        </div>

        <div class="p-4 ">
            <ul>
                <li class="font-semibold mb-6"><h3>Search By FOB Price</h3>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Over $7,000</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer ">Under $7,000</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Under $6,000</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Under $5,000</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Under $3,500</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Under $2,500</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Under $1,000</a>
                </li>
        </div>
        <div class="p-4 ">
            <ul>
                <li class="font-semibold mb-6"><h3>About Us</h3>
                </li>
                <li class="p-1">
                    <a class=" font-semibold">About Denis Motors</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer ">Contacts</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer ">Yard Facilities</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer ">Bank Information</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer">Company Profile</a>
                </li>
                <li class="p-1">
                    <a class="hover:underline cursor-pointer ">Access</a>
                </li>
                </ul>
                <ul>
                </div>
                   
    </div>
    </div>

</div>
<div class="h-8 bg-red-600 flex justify-between pl-16 pr-16 text-white">
    <p><span>@</span>copyright 2021- Denis Motors Imports LTD. All rights Reserved</p>
    <div class="sm:hidden"><h5>Developed By: Salaz Techiz</h5></div>
</div>
</section>





<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<script src="../server.js"> </script>
<script src="index2.js"></script>
<script src="index.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="http://localhost:3000/server.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</body>
</html>